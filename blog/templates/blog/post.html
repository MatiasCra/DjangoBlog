{% extends 'layout.html' %} {% block content %}
<div class="post-info">
  <div class="d-flex flex-column flex-xl-row-reverse justify-content-between">
    {% if post.user.id == user.id %}
      <div class="col-xl-auto col-12 d-flex flex-column">
        <a href="{% url 'Update' post.id %}" class="btn secondary-btn mb-1 d-block d-xl-inline w-100">
          Edit
        </a>
        <a href="{% url 'Delete' post.id %}" class="btn danger-btn mb-3 d-block d-xl-inline w-100">
          Delete
        </a>
      </div>
      <h3 class="display-4 col-xl-10 fit-content">{{ post.title }}</h3>
    {% else %}
      <h3 class="display-4 w-100 fit-content">{{ post.title }}</h3>
    {% endif %}
  </div>
  <h6 class="lead">{{ post.subtitle }}</h6>
  <div class="d-flex justify-content-between">
    <a
      class="d-flex justify-content-start align-items-center link-container"
      href="{% url 'Profile' post.user.id %}"
    >
      <img src="{{ avatar }}" alt="author-avatar" class="author-avatar" />
      <div class="ms-2 d-flex flex-column">
        <span class="">Writen by {{ post.user }}</span>
        <span class="text-muted post-date">{{ post.date }}</span>
      </div>
    </a>
    <div class="text-center align-self-center mx-1 favicon" id="{{ post.id }}">
      {% if user.is_authenticated %}
        {% if is_fav %}
        <i id="favIconI" class="bi bi-star-fill selected fs-3 favicon"></i>
        {% else %}
        <i id="favIconI" class="bi bi-star fs-3 favicon"></i>
        {% endif %}
      {% endif %}
    </div>
  </div>
  <img src="{{ post.image.url }}" alt="post" class="w-100 post-image my-3" />
</div>
<div class="mt-3">{{ post.content | safe }}</div>
<div class="py-2 border-top">
  <span class="d-block">Category:</span>
  <a href="{% url 'Categories' %}?category={{ post.category.id }}" class="card bg-light fit-content px-2 py-1 my-2">{{ post.category }}</a>
  <span class="d-block">Tags:</span>
  <ul id="tagList" class="card bg-light mt-2 p-2 tag-list-ro">
    {% if tags %}
      {% for tag in tags %}
        <li class="card px-1">
          {{ tag }}
        </li>
      {% endfor %}
    {% else %}
      <span class="text-center text-muted w-100" id="noTagsText">No tags added</span>
    {% endif %}
  </ul>
  <div class="border-top">
    <h5 class="py-3">Comments</h5>
    <div class="card p-3">
      {% for comment in post.comments %}
        <div
          class="d-flex justify-content-start align-items-center link-container"
        >
          <div class="d-flex flex-column align-items-center justify-content-center text-center">
            {% if comment.profile %}
              <img src="{{ comment.profile.avatar.url }}" alt="author-avatar" class="author-avatar mx-auto" /> 
            {% else %}
              <img src="{{ default_avatar }}" alt="author-avatar" class="author-avatar" /> 
            {% endif %}
            <p class="display-5 fs-5">
              {{ comment.user.username }}
            </p>
          </div>
          <p class="m-0 ms-3 p-2 card bg-light">
            {{ comment.content }} 
          </p>
        </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock content %}
